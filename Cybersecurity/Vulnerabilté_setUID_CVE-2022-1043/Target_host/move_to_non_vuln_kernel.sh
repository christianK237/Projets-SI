#!/bin/bash

USER_NAME="vulnUser2"

#limiter ressources pour vulnUser2
# fichier config
CONFIG_FILE="/etc/security/limits.conf"

# limiter MAX processus et open files
NPROC_LIMIT=7660
OPEN_FILE_LIMITS=1024

echo "$USER_NAME    soft    nproc     $NPROC_LIMIT" | sudo tee -a "$CONFIG_FILE"
echo "$USER_NAME    hard    nproc     $NPROC_LIMIT" | sudo tee -a "$CONFIG_FILE"
echo "$USER_NAME    soft    nofile    $OPEN_FILE_LIMITS" | sudo tee -a "$CONFIG_FILE"
echo "$USER_NAME    hard    nofile    $OPEN_FILE_LIMITS" | sudo tee -a "$CONFIG_FILE"
sudo cat "$CONFIG_FILE"


# redemarrer
sudo reboot
